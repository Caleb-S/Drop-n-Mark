"use strict";function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var p=new(t.bind.apply(t,o));return r&&_setPrototypeOf(p,r.prototype),p}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _isNativeFunction(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function menuTemplate(){var template=document.createElement("template");var escapeHTMLPolicy=trustedTypes.createPolicy("forceInner",{createHTML:function createHTML(to_escape){return to_escape}});template.innerHTML=escapeHTMLPolicy.createHTML("\n        <style>\n            :host {\n                font-size: 20px !important;\n                color: #484952 !important;\n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;\n     \n            }\n    \n            dialog {\n                top: 0;\n                bottom: 0;\n                position: fixed;\n                z-index: 2057483645;\n                padding: 0px;\n                border: none;\n                cursor: grabbing;\n            }\n    \n            .bookmarkmenu-updated {\n                width: 350px;\n                height: 70vh;\n                max-height: 850px;\n                margin: auto;\n               \n                \n                background-color: #F7F4EE;\n                box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n                \n                overflow: none;\n                border-radius: 5px;\n            }\n    \n             .folder-container {\n                width: 100%;\n                height: 80%;\n                text-align: left;\n                object-fit: fill;\n                flex-direction: column;\n                justify-content: flex-start;\n                align-items: flex-end;\n                display: flex;\n                overflow: hidden;\n                \n            }\n    \n            .new-folder-btn {\n                min-height: 10%;\n                height: 10%;\n                min-width: 100%;\n                width: 100%;\n                display: flex; \n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                background-color: #484952;\n                border-radius: 5px 5px 0px 0px;\n                \n            }\n    \n            .new-folder-btn:hover {\n                background-color: #FF7F50;\n            }\n    \n            .new-btn-txt {\n                pointer-events: none;\n                color: #f7f4ee;\n                text-align: center;\n                font-size: 26px;\n                font-weight: 600;\n                text-decoration: none;\n                line-height: normal;\n            }\n    \n            .general-btn-txt {\n                pointer-events: none;\n                color: #f7f4ee;\n                text-align: center;\n                font-size: 28px !important;\n                font-weight: 600;\n                text-decoration: none;\n                margin: 0px; \n                 line-height: 32px;   \n                 margin-top: -3px;\n     \n            }\n    \n            .general-sub-txt {\n                pointer-events: none;\n                color: #f7f4ee;\n                font-size: 12px !important;\n                width: auto;\n                padding: 0px;\n            }\n    \n            .general-btn {\n              \n                height: 10%;\n                width: 100%;\n                min-height: 10%;\n                min-width: 100%;\n                background-color: #484952;\n    \n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                display: flex;\n                position: absolute;\n                border-radius: 0px 0px 5px 5px;\n    \n                top: auto;\n                bottom: 0%;\n                left: 0%;\n                right: 0%; \n                \n            }\n    \n            .general-btn:hover {\n                box-shadow: none;\n                background-color: #FF7F50;\n                color: white;\n            }\n    \n           \n    \n            .backdrop {\n                z-index: 2047483645;\n                display: block;\n                min-width: 100vw;\n                min-height: 100vh;\n                backdrop-filter: blur(1px);\n                background-color: #1d1e1f83;\n                position: fixed;\n                top: 0%;\n                bottom: 0%;\n                left: 0%;\n                right: 0%;\n            }\n    \n            .main-folder {\n                /* cursor: pointer; */\n                width: 90%;\n                min-height: 60px;\n                background-color: #ffffff;\n                flex-direction: column;\n                justify-content: center;\n                /* align-items: center; */\n                margin-top: 5px;\n                margin-bottom: 5px;\n                margin-right: 5%;\n                display: flex;\n                position: relative;\n                box-shadow: 0 2px 5px rgba(0, 0, 0, .2);\n                text-align: left;\n                align-items: start;\n                padding-left: 95px;\n    \n                box-sizing: border-box;\n                overflow: hidden;\n            }\n    \n            .main-folder-ui5864921:hover {\n                box-shadow: none;\n                background-color: #dcdcdc;\n                color: white !important;\n                border: 3px solid #48495244;\n            }\n    \n            .main-add-folder {\n                width: 80px;\n                min-height: 60px;\n                background-color: #ECECEC;\n                position: absolute;\n                top: 0%;\n                bottom: 0%;\n                left: 0%;\n                right: auto;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n    \n            .main-add-folder:hover { \n                box-shadow: none;\n                background-color: #999999;\n            }\n    \n            .main-f-txt {\n                pointer-events: none;\n                /* cursor: pointer; */\n                color: #585B62;\n                text-align: center;\n                font-size: 23px;\n                font-weight: 600;\n                text-decoration: none;\n                display: flex;\n                align-items: center;\n                flex: auto;\n                justify-content: center;\n                white-space: nowrap;\n                width: auto;\n            }\n\n             .deleteBox {\n                z-index: 2147483546;\n                width: 250px;\n                height: 250px;\n                background-color: white;\n                left: 0%;\n                right: 0%;\n                top: 0%;\n                bottom: 0%;\n                position: fixed;\n                margin: auto;\n                border: 15px solid #484952;\n            }\n\n           .deleteBox[open]{\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n\n            .folder-input {\n                z-index: 2147483646;\n                width: 400px;\n                height: 250px;\n           \n                justify-content:space-evenly;\n                align-items: center;\n                \n                background-color: #484952;\n                border-radius: 8px;\n          \n     \n                margin: auto;\n                box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n                flex-direction: column-reverse;\n                cursor: auto;\n            \n            }\n\n            .folder-input[open] {\n                display: flex;\n            }\n\n            .folder-input input {\n                display: block;\n                width: 80%;\n                height: 40px;\n                padding: 8px;\n                border: none;\n                border-radius: 4px;\n                font-size: 20px;\n                background-color: #ffffff;\n                outline: none;\n                box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n                color: #484952;\n            }\n                \n        </style>\n    \n       \n    \n           \n    \n        <dialog class=\"folder-input\">\n            <input type=\"text\" placeholder=\"New folder name\">\n        </dialog>\n    \n        <dialog class=\"deleteBox\"></dialog>\n    \n    \n    \n        <dialog class=\"bookmarkmenu-updated\" id=\"bookmarkMenu2\">\n            <div class=\"new-folder-btn\">\n                <p class=\"new-btn-txt\">New Folder</p>\n            </div>\n    \n            <div class=\"folder-container\">\n    \n            <!--\n                <div class='main-folder' >\n                    <div class='main-add-folder'>\n                       \n                    </div>\n                    <div class='main-f-txt'>First Bookmark</div>\n                </div>\n    \n                -->\n    \n    \n                <!-- Auto Filled -->\n                <slot></slot>\n            </div>\n    \n            <div class=\"general-btn\">\n                <p class=\"general-btn-txt\">General</p>\n                <small class=\"general-sub-txt\">No Category</small>\n            </div>\n        </dialog>\n    \n         <div class=\"backdrop\"></div>\n    \n    \n     \n    ");return template.content.cloneNode(true)}var BookmarkMenu=/*#__PURE__*/function(_HTMLElement){function BookmarkMenu(){var _this;_classCallCheck(this,BookmarkMenu);_this=_HTMLElement.call(this)||this;_this.attachShadow({mode:"open"});_this.shadowRoot.appendChild(menuTemplate());_this.scrollThresholdPercentage=0.25;_this.scrollInterval=null;// Initialize scrollInterval as null
_this.folderContainer=_this.shadowRoot.querySelector(".folder-container");_this.bookmarkMenu=_this.shadowRoot.querySelector(".bookmarkmenu-updated");_this.createFolder=_this.shadowRoot.querySelector(".folder-input");_this.scrollPosition=0;_this.positionRestored=false;// Store references to event listeners for removal
_this.eventListeners=[];return _this}_inherits(BookmarkMenu,_HTMLElement);return _createClass(BookmarkMenu,[{key:"attributeChangedCallback",value:function attributeChangedCallback(){var imageElement=document.createElement("img");if(this.hasAttribute("src")){imageElement.src=this.getAttribute("src")}if(this.hasAttribute("bookmarked")||this.hasAttribute("createFolder")){this.bookmarkMenu.hasAttribute("open")?this.bookmarkMenu.removeAttribute("open"):"";if(this.hasAttribute("bookmarked")){var deleteBox=this.shadowRoot.querySelector(".deleteBox");deleteBox.setAttribute("open","");if(!deleteBox.hasChildNodes()){deleteBox.appendChild(imageElement)}}else if(this.hasAttribute("createFolder")){this.createFolder.setAttribute("open","");if(!this.createFolder.hasChildNodes()){this.createFolder.appendChild(imageElement)}this.createFolder.querySelector("input").focus()}}}},{key:"connectedCallback",value:function connectedCallback(){var _this2=this;console.log("connected");this.restrictHighlighting.bind(this);var imageElement=document.createElement("img");if(this.hasAttribute("src")){imageElement.src=this.getAttribute("src")}if(this.hasAttribute("bookmarked")||this.hasAttribute("createFolder")){this.bookmarkMenu.hasAttribute("open")?this.bookmarkMenu.removeAttribute("open"):"";if(this.hasAttribute("bookmarked")){var deleteBox=this.shadowRoot.querySelector(".deleteBox");deleteBox.setAttribute("open","");deleteBox.appendChild(imageElement)}else if(this.hasAttribute("createFolder")){this.createFolder.setAttribute("open","");this.createFolder.appendChild(imageElement);var folderInput=this.shadowRoot.querySelector(".folder-input input");folderInput.focus();// Store the event listener for removal
var handleKeyDown=function handleKeyDown(event){if(event.key==="Enter"){event.preventDefault();_this2.handleFolderInput();// Ensure `handleFolderInput` is defined in your class
}};folderInput.addEventListener("keydown",handleKeyDown);this.eventListeners.push({element:folderInput,type:"keydown",handler:handleKeyDown})}}else{this.bookmarkMenu.setAttribute("open","");var slot=this.shadowRoot.querySelector("slot");// Waits until all folder items are loaded
var slotChangeHandler=function slotChangeHandler(){_this2.folderContainer.scrollTop=_this2.getAttribute("scrollPosition")};slot.addEventListener("slotchange",slotChangeHandler);this.eventListeners.push({element:slot,type:"slotchange",handler:slotChangeHandler});// Add mousemove listener
var mouseMoveHandler=this.handleMouseMove.bind(this);this.shadowRoot.addEventListener("mousemove",mouseMoveHandler);this.eventListeners.push({element:this.shadowRoot,type:"mousemove",handler:mouseMoveHandler});// Add general button mouseup listener
var generalBtnHandler=this.handleGeneralBtn.bind(this);var _deleteBox=this.shadowRoot.querySelector(".general-btn");_deleteBox.addEventListener("mouseup",generalBtnHandler);this.eventListeners.push({element:_deleteBox,type:"mouseup",handler:generalBtnHandler})}}},{key:"disconnectedCallback",value:function disconnectedCallback(){console.log("disconnected");// Remove all stored event listeners
this.eventListeners.forEach(function(_ref){var element=_ref.element,type=_ref.type,handler=_ref.handler;element.removeEventListener(type,handler)});this.eventListeners=[];// Clear the array after removal
this.positionRestored=false;this.dispatchEvent(new CustomEvent("menu-scroll-point",{detail:this.scrollPosition,bubbles:true,// Allows the event to bubble up through the DOM
composed:true// Allows the event to pass through Shadow DOM boundaries
}))}},{key:"handleMouseMove",value:function handleMouseMove(event){var _this3=this;var rect=this.folderContainer.getBoundingClientRect();var scrollThresholdPixels=rect.height*this.scrollThresholdPercentage;var scrollStartOffset=25;var distanceFromBottom=rect.bottom-event.clientY;var distanceFromTop=event.clientY-rect.top;// Define max speed and easing factor for momentum
var maxScrollSpeed=15;var baseScrollSpeed=1;var momentum=0;var easingFactor=0.7;clearInterval(this.scrollInterval);// Calculate variable speed based on proximity to edges
var speedDown=Math.min(maxScrollSpeed,baseScrollSpeed+(scrollThresholdPixels-distanceFromBottom)/scrollThresholdPixels*maxScrollSpeed);var speedUp=Math.min(maxScrollSpeed,baseScrollSpeed+(scrollThresholdPixels-distanceFromTop)/scrollThresholdPixels*maxScrollSpeed);// Scroll down logic
if(event.clientY>=rect.bottom-scrollThresholdPixels&&event.clientY<=rect.bottom+15&&event.clientX>=rect.left&&event.clientX<=rect.right){this.scrollInterval=setInterval(function(){_this3.folderContainer.scrollTop+=speedDown;momentum=speedDown;// Capture momentum
},10)}else if(event.clientY<=rect.top+scrollThresholdPixels&&event.clientY>=rect.top-15&&event.clientX>=rect.left&&event.clientX<=rect.right){this.scrollInterval=setInterval(function(){_this3.folderContainer.scrollTop-=speedUp;momentum=-speedUp;// Capture negative momentum for upward scrolling
},10)}else{// Clear the interval but allow momentum to continue briefly
}this.scrollPosition=this.folderContainer.scrollTop}},{key:"handleGeneralBtn",value:function handleGeneralBtn(event){this.dispatchEvent(new CustomEvent("save-general",{detail:"2",bubbles:true,// Allows the event to bubble up through the DOM
composed:true// Allows the event to pass through Shadow DOM boundaries
}))}},{key:"handleFolderInput",value:function handleFolderInput(event){var folderInput=this.shadowRoot.querySelector(".folder-input input");this.dispatchEvent(new CustomEvent("create-folder",{detail:folderInput.value,bubbles:true,// Allows the event to bubble up through the DOM
composed:true// Allows the event to pass through Shadow DOM boundaries
}))}},{key:"removeHighlight",value:function removeHighlight(){if(window.getSelection){window.getSelection().removeAllRanges()}else if(document.selection){document.selection.empty()}}},{key:"restrictHighlighting",value:function restrictHighlighting(){var _this4=this;var menuItems=this.shadowRoot.querySelectorAll("div, dialog, p, small");menuItems.forEach(function(item){var preventContextMenu=function preventContextMenu(event){return event.preventDefault()};item.addEventListener("contextmenu",preventContextMenu);_this4.eventListeners.push({element:item,type:"contextmenu",handler:preventContextMenu});var preventSelectStart=function preventSelectStart(event){return event.preventDefault()};item.addEventListener("selectstart",preventSelectStart);_this4.eventListeners.push({element:item,type:"selectstart",handler:preventSelectStart});var preventMouseDown=function preventMouseDown(event){if(event.button===2){event.preventDefault()}};item.addEventListener("mousedown",preventMouseDown);_this4.eventListeners.push({element:item,type:"mousedown",handler:preventMouseDown});item.draggable=false})}}],[{key:"observedAttributes",get:function get(){return["bookmarked","src","createFolder"]}}])}(/*#__PURE__*/_wrapNativeSuper(HTMLElement));customElements.define("bookmark-menu",BookmarkMenu);